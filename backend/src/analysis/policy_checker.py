"""
Video policy compliance checker using Gemini vision.
Analyzes videos for Facebook Ads Policy violations.
"""
import os
from typing import Dict, Any, Optional
from pathlib import Path

import google.generativeai as genai
from dotenv import load_dotenv

load_dotenv()

FACEBOOK_POLICY_PROMPT = """
–¢–∏ ‚Äî –µ–∫—Å–ø–µ—Ä—Ç –∑ Facebook/Meta Ads Policy –∑ –≥–ª–∏–±–æ–∫–∏–º –∑–Ω–∞–Ω–Ω—è–º –≤—Å—ñ—Ö —Ä–µ–∫–ª–∞–º–Ω–∏—Ö –ø–æ–ª—ñ—Ç–∏–∫ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏. –ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–π —Ü–µ –≤—ñ–¥–µ–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ —ñ –ø–µ—Ä–µ–≤—ñ—Ä –π–æ–≥–æ –Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å –≤—Å—ñ–º –≤–∏–º–æ–≥–∞–º Meta –¥–ª—è —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É.

**–ö–û–ù–¢–ï–ö–°–¢ –ê–ù–ê–õ–Ü–ó–£:**
- –¶–µ –≤—ñ–¥–µ–æ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–µ –¥–ª—è –ü–õ–ê–¢–ù–û–á —Ä–µ–∫–ª–∞–º–∏ –Ω–∞ Facebook/Instagram
- –ó–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å—Å—è –Ω–∞–π—Å—É–≤–æ—Ä—ñ—à—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏ –º–æ–¥–µ—Ä–∞—Ü—ñ—ó
- –ù–µ–æ–±—Ö—ñ–¥–Ω–∞ 100% –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å Community Standards —Ç–∞ Advertising Policies
- –ê–Ω–∞–ª—ñ–∑—É–π –≤—ñ–¥–µ–æ —è–∫ –ª—é–¥–∏–Ω–∞-–º–æ–¥–µ—Ä–∞—Ç–æ—Ä Meta

---

**–ó–ê–í–î–ê–ù–ù–Ø:**

### 1. –î–ï–¢–ê–õ–¨–ù–ò–ô –û–ü–ò–° –í–Ü–î–ï–û (–ø–æ–∫–∞–¥—Ä–æ–≤–∏–π –∞–Ω–∞–ª—ñ–∑)

**–í—ñ–∑—É–∞–ª—å–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç:**
- –û–ø–∏—à–∏ –∫–æ–∂–Ω—É —Å—Ü–µ–Ω—É/–∫–∞–¥—Ä –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ
- –©–æ –ø–æ–∫–∞–∑–∞–Ω–æ –≤ –∫–æ–∂–Ω—ñ–π —Å–µ–∫—É–Ω–¥—ñ –≤—ñ–¥–µ–æ?
- –Ø–∫—ñ –ø–µ—Ä–µ—Ö–æ–¥–∏ –º—ñ–∂ —Å—Ü–µ–Ω–∞–º–∏?
- –Ø–∫—ñ—Å—Ç—å –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–∞ –æ—Å–≤—ñ—Ç–ª–µ–Ω–Ω—è
- –ß–∏ —î –±—É–¥—å-—è–∫—ñ –ø—Ä–∏—Ö–æ–≤–∞–Ω—ñ –∞–±–æ –Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏?

**–õ—é–¥–∏ —É –≤—ñ–¥–µ–æ:**
- –°–∫—ñ–ª—å–∫–∏ –ª—é–¥–µ–π, —ó—Ö —Å—Ç–∞—Ç—å, –ø—Ä–∏–±–ª–∏–∑–Ω–∏–π –≤—ñ–∫
- –ó–æ–≤–Ω—ñ—à–Ω—ñ–π –≤–∏–≥–ª—è–¥ (–æ–¥—è–≥, –º–∞–∫—ñ—è–∂, –∑–∞—á—ñ—Å–∫–∞)
- –ß–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –æ–¥—è–≥ –Ω–æ—Ä–º–∞–º –ø—Ä–∏—Å—Ç–æ–π–Ω–æ—Å—Ç—ñ? (–Ω–µ–º–∞—î –Ω–∞–¥–º—ñ—Ä–Ω–æ–≥–æ –æ–≥–æ–ª–µ–Ω–Ω—è)
- –ü–æ–∑–∏ —Ç–∞ –º–æ–≤–∞ —Ç—ñ–ª–∞
- –í–∏—Ä–∞–∑ –æ–±–ª–∏—á—á—è —Ç–∞ –µ–º–æ—Ü—ñ—ó
- –í–∑–∞—î–º–æ–¥—ñ—è –º—ñ–∂ –ª—é–¥—å–º–∏
- ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –ß–∏ –≤–∏–≥–ª—è–¥–∞—é—Ç—å –ª—é–¥–∏ —è–∫ –ø–æ–≤–Ω–æ–ª—ñ—Ç–Ω—ñ (18+)? –Ø–∫—â–æ —î —Å—É–º–Ω—ñ–≤–∏ - –≤–∫–∞–∂–∏ —Ü–µ

**–û–±'—î–∫—Ç–∏, –ø—Ä–æ–¥—É–∫—Ç–∏, —Ä–µ–∫–≤—ñ–∑–∏—Ç:**
- –î–µ—Ç–∞–ª—å–Ω–∏–π —Å–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –≤–∏–¥–∏–º–∏—Ö –ø—Ä–µ–¥–º–µ—Ç—ñ–≤
- –ü—Ä–æ–¥—É–∫—Ç–∏ –∞–±–æ –ø–æ—Å–ª—É–≥–∏, —â–æ —Ä–µ–∫–ª–∞–º—É—é—Ç—å—Å—è
- –§–æ–Ω–æ–≤—ñ –æ–±'—î–∫—Ç–∏
- ‚ö†Ô∏è –ß–∏ —î –ø—Ä–µ–¥–º–µ—Ç–∏, —â–æ –º–æ–∂—É—Ç—å —Ç—Ä–∞–∫—Ç—É–≤–∞—Ç–∏—Å—è —è–∫ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ (—ñ–º—ñ—Ç–∞—Ü—ñ—è –∑–±—Ä–æ—ó, —Ç–∞–±–ª–µ—Ç–∫–∏, –∞–ª–∫–æ–≥–æ–ª—å —Ç–æ—â–æ)?

**–¢–µ–∫—Å—Ç –Ω–∞ –µ–∫—Ä–∞–Ω—ñ:**
- –í–µ—Å—å —Ç–µ–∫—Å—Ç —Ç–æ—á–Ω–æ (–≤–∫–ª—é—á–Ω–æ –∑ –ø–æ–º–∏–ª–∫–∞–º–∏ —è–∫—â–æ —î)
- –®—Ä–∏—Ñ—Ç, —Ä–æ–∑–º—ñ—Ä, –∫–æ–ª—ñ—Ä
- –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å –ø–æ–∫–∞–∑—É –∫–æ–∂–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç—É
- ‚ö†Ô∏è –ü–µ—Ä–µ–≤—ñ—Ä –Ω–∞ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ —Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è: "—à–≤–∏–¥–∫–µ —Å—Ö—É–¥–Ω–µ–Ω–Ω—è", "—á—É–¥–æ–¥—ñ–π–Ω–∏–π –µ—Ñ–µ–∫—Ç", "–≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç", "—Å—Ö–≤–∞–ª–µ–Ω–æ FDA" —Ç–æ—â–æ
- ‚ö†Ô∏è –ß–∏ —î –∫–ª—ñ–∫–±–µ–π—Ç –∞–±–æ –æ–º–∞–Ω–ª–∏–≤—ñ –∑–∞–≥–æ–ª–æ–≤–∫–∏?
- ‚ö†Ô∏è –ß–∏ —î –≥—Ä–∞–º–∞—Ç–∏—á–Ω—ñ –ø–æ–º–∏–ª–∫–∏, —â–æ –º–æ–∂—É—Ç—å –≤–∫–∞–∑—É–≤–∞—Ç–∏ –Ω–∞ —à–∞—Ö—Ä–∞–π—Å—Ç–≤–æ?

**–ê—É–¥—ñ–æ:**
- –û–ø–∏—Å –º—É–∑–∏–∫–∏ (–∂–∞–Ω—Ä, –Ω–∞—Å—Ç—Ä—ñ–π, —Ç–µ–º–ø)
- –ì–æ–ª–æ—Å –∑–∞ –∫–∞–¥—Ä–æ–º (—â–æ –≥–æ–≤–æ—Ä–∏—Ç—å—Å—è, —ñ–Ω—Ç–æ–Ω–∞—Ü—ñ—è)
- –ó–≤—É–∫–æ–≤—ñ –µ—Ñ–µ–∫—Ç–∏
- –ß—ñ—Ç–∫—ñ—Å—Ç—å —Ç–∞ —è–∫—ñ—Å—Ç—å –∑–≤—É–∫—É

**–ñ–µ—Å—Ç–∏ —Ç–∞ –¥—ñ—ó:**
- –í—Å—ñ —Ä—É—Ö–∏ —Ç–∞ –∂–µ—Å—Ç–∏ –¥–µ—Ç–∞–ª—å–Ω–æ
- ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: —á–∏ –Ω–µ–º–∞—î –Ω–µ–ø—Ä–∏—Å—Ç–æ–π–Ω–∏—Ö –∂–µ—Å—Ç—ñ–≤ (—Å–µ—Ä–µ–¥–Ω—ñ–π –ø–∞–ª–µ—Ü—å, –Ω–µ–ø—Ä–∏–π–Ω—è—Ç–Ω—ñ —Ä—É—Ö–∏ —Ç–∞–∑–æ–º, —ñ–º—ñ—Ç–∞—Ü—ñ—è —Å–µ–∫—Å—É–∞–ª—å–Ω–∏—Ö –¥—ñ–π)
- –ß–∏ –±–µ–∑–ø–µ—á–Ω—ñ —Ñ—ñ–∑–∏—á–Ω—ñ –¥—ñ—ó (–Ω–µ–º–∞—î –Ω–µ–±–µ–∑–ø–µ—á–Ω–∏—Ö —Ç—Ä—é–∫—ñ–≤ –±–µ–∑ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω—å)?

**–ó–∞–≥–∞–ª—å–Ω–∏–π —Ç–æ–Ω:**
- –ï–º–æ—Ü—ñ–π–Ω–µ –∑–∞–±–∞—Ä–≤–ª–µ–Ω–Ω—è
- –¶—ñ–ª—å–æ–≤–∞ –∞—É–¥–∏—Ç–æ—Ä—ñ—è
- –°—Ç–∏–ª—å –ø–æ–¥–∞—á—ñ (—Å–µ—Ä–π–æ–∑–Ω–∏–π, –≥—É–º–æ—Ä–∏—Å—Ç–∏—á–Ω–∏–π, –º–æ—Ç–∏–≤–∞—Ü—ñ–π–Ω–∏–π —Ç–æ—â–æ)

---

### 2. –ë–†–ï–ù–î–ò, –¢–û–†–ì–û–í–Ü –ú–ê–†–ö–ò –¢–ê –Ü–ù–¢–ï–õ–ï–ö–¢–£–ê–õ–¨–ù–ê –í–õ–ê–°–ù–Ü–°–¢–¨

**–í–∏—è–≤–ª–µ–Ω—ñ –±—Ä–µ–Ω–¥–∏:**
- –°–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –ª–æ–≥–æ—Ç–∏–ø—ñ–≤, –Ω–∞–∑–≤ –∫–æ–º–ø–∞–Ω—ñ–π, —Ç–æ—Ä–≥–æ–≤–∏—Ö –º–∞—Ä–æ–∫
- –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å —Ç–∞ —Ä–æ–∑–º—ñ—Ä –ø–æ–∫–∞–∑—É –∫–æ–∂–Ω–æ–≥–æ –±—Ä–µ–Ω–¥—É
- –ß–∏ —î —Ü–µ –≤–ª–∞—Å–Ω–∏–π –±—Ä–µ–Ω–¥ —Ä–µ–∫–ª–∞–º–æ–¥–∞–≤—Ü—è —á–∏ —Å—Ç–æ—Ä–æ–Ω–Ω—ñ–π?

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**
- ‚ö†Ô∏è –ß–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –±—Ä–µ–Ω–¥–∏ META/Facebook/Instagram –±–µ–∑ –¥–æ–∑–≤–æ–ª—É?
- ‚ö†Ô∏è –ß–∏ —î –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç—ñ–≤ (TikTok, Twitter/X, YouTube) –∑ –Ω–µ–≥–∞—Ç–∏–≤–Ω–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º?
- ‚ö†Ô∏è –ß–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è celebritities/–ø—É–±–ª—ñ—á–Ω—ñ –æ—Å–æ–±–∏ –±–µ–∑ –æ—á–µ–≤–∏–¥–Ω–æ–≥–æ –ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤–∞?
- ‚ö†Ô∏è –ß–∏ —î –ª–æ–≥–æ—Ç–∏–ø–∏ –≤—ñ–¥–æ–º–∏—Ö –∫–æ–º–ø–∞–Ω—ñ–π (Apple, Nike, Coca-Cola —Ç–æ—â–æ)?
- –ß–∏ –º–æ–∂–µ —Ü–µ —Ç—Ä–∞–∫—Ç—É–≤–∞—Ç–∏—Å—è —è–∫ —Ñ–∞–ª—å—à–∏–≤–µ —Å—Ö–≤–∞–ª–µ–Ω–Ω—è (fake endorsement)?

**–ê–≤—Ç–æ—Ä—Å—å–∫—ñ –ø—Ä–∞–≤–∞:**
- –ú–æ–∂–ª–∏–≤—ñ –ø–æ—Ä—É—à–µ–Ω–Ω—è –∞–≤—Ç–æ—Ä—Å—å–∫–∏—Ö –ø—Ä–∞–≤ –Ω–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å—Ç–æ–∫–æ–≤–∏—Ö —Ñ–æ—Ç–æ/–≤—ñ–¥–µ–æ (—è–∫—â–æ –≤–ø—ñ–∑–Ω–∞—î—à)

---

### 3. –ó–ê–ë–û–†–û–ù–ï–ù–ò–ô –¢–ê –û–ë–ú–ï–ñ–ï–ù–ò–ô –ö–û–ù–¢–ï–ù–¢

**3.1. –ù–µ–ø—Ä–∏—Å—Ç–æ–π–Ω–æ—Å—Ç—ñ —Ç–∞ —Å–µ–∫—Å—É–∞–ª—å–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç:**
- ‚ö†Ô∏è –û–≥–æ–ª–µ–Ω–Ω—è (–Ω–∞–≤—ñ—Ç—å —á–∞—Å—Ç–∫–æ–≤–µ - –æ–≥–æ–ª–µ–Ω—ñ –ø–ª–µ—á—ñ, –¥–µ–∫–æ–ª—å—Ç–µ, –±—ñ–ª–∏–∑–Ω–∞)
- ‚ö†Ô∏è –°–µ–∫—Å—É–∞–ª—å–Ω–æ –Ω–∞—Ç—è–∫–∞—é—á—ñ –ø–æ–∑–∏ –∞–±–æ —Ä—É—Ö–∏
- ‚ö†Ô∏è –ê–∫—Ü–µ–Ω—Ç –Ω–∞ —á–∞—Å—Ç–∏–Ω–∞—Ö —Ç—ñ–ª–∞ (—Å—ñ–¥–Ω–∏—Ü—ñ, –≥—Ä—É–¥–∏, –ø–∞—Ö)
- ‚ö†Ô∏è –ü—Ä–æ–∑–æ—Ä–∏–π –æ–¥—è–≥ –∞–±–æ –æ–¥—è–≥ —â–æ –æ–±—Ç—è–≥—É—î
- ‚ö†Ô∏è –ö–∞–º–µ—Ä–∞ —Ñ–æ–∫—É—Å—É—î—Ç—å—Å—è –Ω–∞ —ñ–Ω—Ç–∏–º–Ω–∏—Ö –∑–æ–Ω–∞—Ö
- ‚ö†Ô∏è –ù–∞—Ç—è–∫–∏ –Ω–∞ —Å–µ–∫—Å—É–∞–ª—å–Ω—ñ –ø–æ—Å–ª—É–≥–∏ –∞–±–æ –∑–Ω–∞–π–æ–º—Å—Ç–≤–∞ –¥–ª—è –¥–æ—Ä–æ—Å–ª–∏—Ö
- –†—ñ–≤–µ–Ω—å –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ—Å—Ç—ñ: –ø–æ–≤–Ω—ñ—Å—Ç—é –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î / –ø–æ—Ç—Ä–µ–±—É—î –∫–æ—Ä–µ–∫—Ü—ñ—ó / –∫–∞—Ç–µ–≥–æ—Ä–∏—á–Ω–æ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ

**3.2. –ù–∞—Å–∏–ª—å—Å—Ç–≤–æ —Ç–∞ –Ω–µ–±–µ–∑–ø–µ—á–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç:**
- ‚ö†Ô∏è –ó–±—Ä–æ—è (–Ω–∞–≤—ñ—Ç—å —ñ–≥—Ä–∞—à–∫–æ–≤–∞ –∞–±–æ —ñ—Å—Ç–æ—Ä–∏—á–Ω–∞)
- ‚ö†Ô∏è –ù–∞—Å–∏–ª—å—Å—Ç–≤–æ –∞–±–æ –ø–æ–≥—Ä–æ–∑–∏
- ‚ö†Ô∏è –ö—Ä–æ–≤, —Ç—Ä–∞–≤–º–∏, –º–µ–¥–∏—á–Ω—ñ –ø—Ä–æ—Ü–µ–¥—É—Ä–∏
- ‚ö†Ô∏è –ù–µ–±–µ–∑–ø–µ—á–Ω—ñ —Ç—Ä—é–∫–∏ –±–µ–∑ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω—å
- ‚ö†Ô∏è –ñ–æ—Ä—Å—Ç–æ–∫–µ –ø–æ–≤–æ–¥–∂–µ–Ω–Ω—è –∑ —Ç–≤–∞—Ä–∏–Ω–∞–º–∏
- ‚ö†Ô∏è –ê–≤–∞—Ä—ñ—ó, –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∏, –ª–∏—Ö–∞

**3.3. –î–∏—Å–∫—Ä–∏–º—ñ–Ω–∞—Ü—ñ—è —Ç–∞ –æ–±—Ä–∞–∑–ª–∏–≤–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç:**
- ‚ö†Ô∏è –†–∞—Å–æ–≤—ñ, –µ—Ç–Ω—ñ—á–Ω—ñ —Å—Ç–µ—Ä–µ–æ—Ç–∏–ø–∏
- ‚ö†Ô∏è –î–∏—Å–∫—Ä–∏–º—ñ–Ω–∞—Ü—ñ—è –∑–∞ —Å—Ç–∞—Ç—é, –≤—ñ–∫–æ–º, —Ä–µ–ª—ñ–≥—ñ—î—é
- ‚ö†Ô∏è –û–±—Ä–∞–∑–ª–∏–≤—ñ –∂–∞—Ä—Ç–∏ –∞–±–æ –º–µ–º—ñ
- ‚ö†Ô∏è –ù–µ–≥–∞—Ç–∏–≤–Ω—ñ –∞—Å–æ—Ü—ñ–∞—Ü—ñ—ó –∑ –ø–µ–≤–Ω–∏–º–∏ –≥—Ä—É–ø–∞–º–∏ –ª—é–¥–µ–π
- ‚ö†Ô∏è Body shaming –∞–±–æ –∑–Ω–µ–≤–∞–≥–∞ –¥–æ –∑–æ–≤–Ω—ñ—à–Ω–æ—Å—Ç—ñ
- ‚ö†Ô∏è –¢–∞—Ä–≥–µ—Ç–∏–Ω–≥ –Ω–∞ –≤—Ä–∞–∑–ª–∏–≤—ñ –≥—Ä—É–ø–∏ (–≤–∞–≥—ñ—Ç–Ω—ñ, –ª—é–¥–∏ –∑ —Ö–≤–æ—Ä–æ–±–∞–º–∏, —Ñ—ñ–Ω–∞–Ω—Å–æ–≤—ñ —Ç—Ä—É–¥–Ω–æ—â—ñ)

**3.4. –¢—é—Ç—é–Ω, –∞–ª–∫–æ–≥–æ–ª—å, –Ω–∞—Ä–∫–æ—Ç–∏–∫–∏:**
- ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –¢—é—Ç—é–Ω–æ–≤—ñ –≤–∏—Ä–æ–±–∏, –≤–µ–π–ø–∏, –µ-—Å–∏–≥–∞—Ä–µ—Ç–∏ (–ü–û–í–ù–ê –ó–ê–ë–û–†–û–ù–ê)
- ‚ö†Ô∏è –ê–ª–∫–æ–≥–æ–ª—å (–≤–∏–º–∞–≥–∞—î –æ–±–º–µ–∂–µ–Ω—å –∑–∞ –≤—ñ–∫–æ–º, –Ω–µ –º–æ–∂–Ω–∞ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –≤–∂–∏–≤–∞–Ω–Ω—è)
- ‚ö†Ô∏è –ù–∞—Ä–∫–æ—Ç–∏–∫–∏, –∞–ø—Ç–µ—á–Ω—ñ –ø—Ä–µ–ø–∞—Ä–∞—Ç–∏, CBD –ø—Ä–æ–¥—É–∫—Ç–∏
- ‚ö†Ô∏è –ü—Ä–∏–Ω–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –¥–ª—è –≤–∂–∏–≤–∞–Ω–Ω—è (–±–æ–Ω–≥–∏, —Ç—Ä—É–±–∫–∏ —Ç–æ—â–æ)
- ‚ö†Ô∏è –ù–∞—Ç—è–∫–∏ –Ω–∞ –∑–º—ñ–Ω—É —Å–≤—ñ–¥–æ–º–æ—Å—Ç—ñ –∞–±–æ "–∫–∞–π—Ñ"

**3.5. –ê–∑–∞—Ä—Ç–Ω—ñ —ñ–≥—Ä–∏ —Ç–∞ –ª–æ—Ç–µ—Ä–µ—ó:**
- ‚ö†Ô∏è –ö–∞–∑–∏–Ω–æ, –ø–æ–∫–µ—Ä, —Å—Ç–∞–≤–∫–∏
- ‚ö†Ô∏è –õ–æ—Ç–µ—Ä–µ—ó –∞–±–æ —Ä–æ–∑—ñ–≥—Ä–∞—à—ñ –±–µ–∑ –ø—Ä–∞–≤–∏–ª
- ‚ö†Ô∏è –ù–∞–≤–∏—á–∫–∏ —â–æ —ñ–º—ñ—Ç—É—é—Ç—å –∞–∑–∞—Ä—Ç–Ω—ñ —ñ–≥—Ä–∏

**3.6. –§—ñ–Ω–∞–Ω—Å–æ–≤—ñ –ø–æ—Å–ª—É–≥–∏ —Ç–∞ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞:**
- ‚ö†Ô∏è –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞, ICO, NFT (–≤–∏–º–∞–≥–∞—î –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –¥–æ–∑–≤–æ–ª—É)
- ‚ö†Ô∏è –ë—ñ–Ω–∞—Ä–Ω—ñ –æ–ø—Ü—ñ–æ–Ω–∏
- ‚ö†Ô∏è –û–±—ñ—Ü—è–Ω–∫–∏ —à–≤–∏–¥–∫–æ–≥–æ –∑–±–∞–≥–∞—á–µ–Ω–Ω—è
- ‚ö†Ô∏è –°—Ö–µ–º–∏ "—à–≤–∏–¥–∫–∏—Ö –≥—Ä–æ—à–µ–π"
- ‚ö†Ô∏è –ö—Ä–µ–¥–∏—Ç–∏ –∑ –≤–∏—Å–æ–∫–∏–º–∏ –≤—ñ–¥—Å–æ—Ç–∫–∞–º–∏ –±–µ–∑ —Ä–æ–∑–∫—Ä–∏—Ç—Ç—è —É–º–æ–≤

---

### 4. –ú–ï–î–ò–ß–ù–Ü –¢–ê HEALTH-RELATED CLAIMS

**–ü—Ä–æ–¥—É–∫—Ç–∏ –¥–ª—è –∑–¥–æ—Ä–æ–≤'—è:**
- ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è "–î–æ/–ü—ñ—Å–ª—è" (–ó–ê–ë–û–†–û–ù–ï–ù–û –±–µ–∑ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ–≥–æ –¥–æ–∑–≤–æ–ª—É)
- ‚ö†Ô∏è –ù–µ—Ä–µ–∞–ª—ñ—Å—Ç–∏—á–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Å—Ö—É–¥–Ω–µ–Ω–Ω—è
- ‚ö†Ô∏è –¢–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø—Ä–æ –ª—ñ–∫—É–≤–∞–Ω–Ω—è —Ö–≤–æ—Ä–æ–±
- ‚ö†Ô∏è –î—ñ—î—Ç–∏—á–Ω—ñ –¥–æ–±–∞–≤–∫–∏ –±–µ–∑ –¥–∏—Å–∫–ª–µ–π–º–µ—Ä—ñ–≤
- ‚ö†Ô∏è –§–æ–∫—É—Å –Ω–∞ –ø—Ä–æ–±–ª–µ–º–Ω–∏—Ö –∑–æ–Ω–∞—Ö —Ç—ñ–ª–∞
- ‚ö†Ô∏è –õ—ñ–∫–∏, —â–æ –≤—ñ–¥–ø—É—Å–∫–∞—é—Ç—å—Å—è –∑–∞ —Ä–µ—Ü–µ–ø—Ç–æ–º
- ‚ö†Ô∏è –ú–µ–¥–∏—á–Ω—ñ –ø—Ä–∏—Å—Ç—Ä–æ—ó –±–µ–∑ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- ‚ö†Ô∏è –¢–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —Å—Ö–≤–∞–ª–µ–Ω—ñ FDA/MOH –±–µ–∑ –¥–æ–∫–∞–∑—ñ–≤

**–ü—Å–∏—Ö–æ–ª–æ–≥—ñ—á–Ω—ñ –º–∞–Ω—ñ–ø—É–ª—è—Ü—ñ—ó:**
- ‚ö†Ô∏è –ó–∞–ª—è–∫—É–≤–∞–Ω–Ω—è ("—É –≤–∞—Å –º–æ–∂–µ –±—É—Ç–∏ —Ä–∞–∫")
- ‚ö†Ô∏è –í–∏–∫–ª–∏–∫–∞–Ω–Ω—è —Å—Ç—Ä–∞—Ö—É –∞–±–æ –ø–∞–Ω—ñ–∫–∏
- ‚ö†Ô∏è –°–∞–º–æ–¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–µ—Ä–π–æ–∑–Ω–∏—Ö –∑–∞—Ö–≤–æ—Ä—é–≤–∞–Ω—å
- ‚ö†Ô∏è –í—ñ–¥–º–æ–≤–∞ –≤—ñ–¥ —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω–æ—ó –º–µ–¥–∏—Ü–∏–Ω–∏

---

### 5. –û–ú–ê–ù–õ–ò–í–Ü –ü–†–ê–ö–¢–ò–ö–ò

**–ö–ª—ñ–∫–±–µ–π—Ç —Ç–∞ —Å–µ–Ω—Å–∞—Ü—ñ—ó:**
- ‚ö†Ô∏è –ù–µ–ø—Ä–∞–≤–¥–∏–≤—ñ –∑–∞–≥–æ–ª–æ–≤–∫–∏
- ‚ö†Ô∏è "–í–∏ –Ω–µ –ø–æ–≤—ñ—Ä–∏—Ç–µ —â–æ —Å—Ç–∞–ª–æ—Å—è –¥–∞–ª—ñ"
- ‚ö†Ô∏è –§–µ–π–∫–æ–≤—ñ –∫–Ω–æ–ø–∫–∏ "play" –∞–±–æ "close"
- ‚ö†Ô∏è –û–º–∞–Ω–ª–∏–≤—ñ –µ—Å–∫—ñ–∑–∏ (thumbnails)

**–ù–µ—Ä–µ–∞–ª—ñ—Å—Ç–∏—á–Ω—ñ –æ–±—ñ—Ü—è–Ω–∫–∏:**
- ‚ö†Ô∏è "–°—Ö—É–¥–Ω–∏ –Ω–∞ 10 –∫–≥ –∑–∞ —Ç–∏–∂–¥–µ–Ω—å"
- ‚ö†Ô∏è "–ó–∞—Ä–æ–±–ª—è–π $10000 –∑–∞ –¥–µ–Ω—å"
- ‚ö†Ô∏è "100% –≥–∞—Ä–∞–Ω—Ç—ñ—è" –±–µ–∑ —É–º–æ–≤
- ‚ö†Ô∏è –§–∞–ª—å—à–∏–≤—ñ –≤—ñ–¥–≥—É–∫–∏ –∞–±–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–®–∞—Ö—Ä–∞–π—Å—Ç–≤–æ:**
- ‚ö†Ô∏è –§—ñ—à–∏–Ω–≥ –∞–±–æ –∑–±—ñ—Ä –æ—Å–æ–±–∏—Å—Ç–∏—Ö –¥–∞–Ω–∏—Ö
- ‚ö†Ô∏è –ú–∞–ª–≤–∞—Ä—ñ –∞–±–æ —à–∫—ñ–¥–ª–∏–≤—ñ –ø—Ä–æ–≥—Ä–∞–º–∏
- ‚ö†Ô∏è –§–∞–ª—å—à–∏–≤—ñ –∑–Ω–∏–∂–∫–∏ –∞–±–æ –¥–µ—Ñ—ñ—Ü–∏—Ç ("–∑–∞–ª–∏—à–∏–ª–æ—Å—å 2 —Ç–æ–≤–∞—Ä–∏")
- ‚ö†Ô∏è –ü—ñ–¥—Ä–æ–±–∫–∞ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

---

### 6. –ú–£–ó–ò–ö–ê –¢–ê –ê–£–î–Ü–û –ê–í–¢–û–†–°–¨–ö–Ü –ü–†–ê–í–ê

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –º—É–∑–∏–∫–∏:**
- –ù–∞–∑–≤–∞ —Ç—Ä–µ–∫—É —è–∫—â–æ –≤–ø—ñ–∑–Ω–∞—î—Ç—å—Å—è
- ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –ß–∏ –∑–≤—É—á–∏—Ç—å —è–∫ –∫–æ–º–µ—Ä—Ü—ñ–π–Ω–∞ –º—É–∑–∏–∫–∞ –≤—ñ–¥–æ–º–∏—Ö –≤–∏–∫–æ–Ω–∞–≤—Ü—ñ–≤?
- ‚ö†Ô∏è –ß–∏ —î —Ü–µ –ø–æ–ø—É–ª—è—Ä–Ω–∞ –ø—ñ—Å–Ω—è (–π–º–æ–≤—ñ—Ä–Ω–æ –∑–∞—Ö–∏—â–µ–Ω–∞)?
- –ë–µ–∑–ø–µ—á–Ω—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏: royalty-free –º—É–∑–∏–∫–∞, Facebook Sound Collection, –ª—ñ—Ü–µ–Ω–∑–æ–≤–∞–Ω–∞ –º—É–∑–∏–∫–∞

**–ê—É–¥—ñ–æ –∫–æ–Ω—Ç–µ–Ω—Ç:**
- ‚ö†Ô∏è –õ–∞–π–∫–∞, –æ–±—Ä–∞–∑–ª–∏–≤—ñ —Å–ª–æ–≤–∞
- ‚ö†Ô∏è –ê–≥—Ä–µ—Å–∏–≤–Ω—ñ –∞–±–æ –æ–±—Ä–∞–∑–ª–∏–≤—ñ –≤–∏—Å–ª–æ–≤–ª—é–≤–∞–Ω–Ω—è
- ‚ö†Ô∏è –ù–µ–ø—Ä–∞–≤–¥–∏–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –≥–æ–ª–æ—Å–æ–º

---

### 7. NSFW (NOT SAFE FOR WORK) –§–Ü–õ–¨–¢–†

**–ó–∞–≥–∞–ª—å–Ω–∞ –±–µ–∑–ø–µ—á–Ω—ñ—Å—Ç—å:**
- –ß–∏ –º–æ–∂–Ω–∞ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –Ω–∞ —Ä–æ–±–æ—á–æ–º—É –º—ñ—Å—Ü—ñ?
- –ß–∏ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è —Å—ñ–º–µ–π–Ω–æ–≥–æ –ø–µ—Ä–µ–≥–ª—è–¥—É?
- –ß–∏ –±–µ–∑–ø–µ—á–Ω–æ –¥–ª—è –¥—ñ—Ç–µ–π 13+?

**–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:**
- ‚ö†Ô∏è –û–≥–æ–ª–µ–Ω–Ω—è –±—É–¥—å-—è–∫–æ–≥–æ —Ä—ñ–≤–Ω—è
- ‚ö†Ô∏è –Ü–Ω—Ç–∏–º–Ω–∏–π –∞–±–æ –µ—Ä–æ—Ç–∏—á–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
- ‚ö†Ô∏è –®–æ–∫—É—é—á—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (–∫—Ä–æ–≤, —Ç—Ä–∞–≤–º–∏, –æ–ø–µ—Ä–∞—Ü—ñ—ó)
- ‚ö†Ô∏è –¢—Ä–∏–≤–æ–∂–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç (–∂–∞—Ö–∏, –Ω–∞—Å–∏–ª—å—Å—Ç–≤–æ)
- ‚ö†Ô∏è –ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –¥–æ—Ä–æ—Å–ª–∏—Ö (–Ω–∞–≤—ñ—Ç—å –Ω–∞—Ç—è–∫–∏)

---

### 8. –ü–û–õ–Ü–¢–ò–ö–ê –û–°–û–ë–ò–°–¢–ò–• –ê–¢–†–ò–ë–£–¢–Ü–í

**–¢–∞—Ä–≥–µ—Ç–∏–Ω–≥ –Ω–∞ –æ—Å–æ–±–∏—Å—Ç—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- ‚ö†Ô∏è –ó–ê–ë–û–†–û–ù–ï–ù–û: "–¢–∏ —Ç–æ–≤—Å—Ç–∏–π? –ö—É–ø–∏ —Ü–µ–π –ø—Ä–æ–¥—É–∫—Ç"
- ‚ö†Ô∏è –ó–ê–ë–û–†–û–ù–ï–ù–û: "–î–ª—è –ª—é–¥–µ–π –∑ –¥—ñ–∞–±–µ—Ç–æ–º"
- ‚ö†Ô∏è –ó–ê–ë–û–†–û–ù–ï–ù–û: "–°–∞–º–æ—Ç–Ω—ñ? –ó–Ω–∞–π–¥–∏ –ø–∞—Ä—É"
- ‚ö†Ô∏è –ó–ê–ë–û–†–û–ù–ï–ù–û: –ó–≤–µ—Ä—Ç–∞–Ω–Ω—è –¥–æ —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–æ–≥–æ —Å—Ç–∞–Ω—É
- ‚ö†Ô∏è –ó–ê–ë–û–†–û–ù–ï–ù–û: –ù–∞—Ç—è–∫–∏ –Ω–∞ –º–µ–¥–∏—á–Ω–∏–π —Å—Ç–∞–Ω
- ‚ö†Ô∏è –ó–ê–ë–û–†–û–ù–ï–ù–û: –¢–∞—Ä–≥–µ—Ç–∏–Ω–≥ –Ω–∞ —Ä–µ–ª—ñ–≥—ñ—é, —Ä–∞—Å—É

---

### 9. –¢–ï–•–ù–Ü–ß–ù–ê –Ø–ö–Ü–°–¢–¨ –¢–ê USER EXPERIENCE

**–Ø–∫—ñ—Å—Ç—å –≤—ñ–¥–µ–æ:**
- –†–æ–∑–¥—ñ–ª—å–Ω–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å (–º—ñ–Ω—ñ–º—É–º 720p —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
- ‚ö†Ô∏è –ß–∏ –Ω–µ –∑–∞–Ω–∞–¥—Ç–æ —Ä–æ–∑–º–∏—Ç–µ –∞–±–æ –Ω–∏–∑—å–∫–æ—ó —è–∫–æ—Å—Ç—ñ?
- ‚ö†Ô∏è –ß–∏ –Ω–µ–º–∞—î –±–ª–∏–º–∞—é—á–∏—Ö –µ—Ñ–µ–∫—Ç—ñ–≤ (–µ–ø—ñ–ª–µ–ø—Å—ñ—è-–Ω–µ–±–µ–∑–ø–µ—á–Ω–æ)?
- ‚ö†Ô∏è –ß–∏ –Ω–µ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç—É –ø—Ä–∏ –ø–µ—Ä–µ–≥–ª—è–¥—ñ?

**–¢–µ–∫—Å—Ç —É –≤—ñ–¥–µ–æ:**
- ‚ö†Ô∏è Facebook —Ä–µ–∫–æ–º–µ–Ω–¥—É—î –º–µ–Ω—à–µ 20% —Ç–µ–∫—Å—Ç—É –≤—ñ–¥ –ø–ª–æ—â—ñ
- –ß—ñ—Ç–∫—ñ—Å—Ç—å —Ç–∞ —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å —Ç–µ–∫—Å—Ç—É
- –ö–æ–Ω—Ç—Ä–∞—Å—Ç —Ç–∞ —Ä–æ–∑–º—ñ—Ä —à—Ä–∏—Ñ—Ç—É

---

### 10. –î–û–î–ê–¢–ö–û–í–Ü –†–ò–ó–ò–ö–ò –¢–ê EDGE CASES

**–°–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ –∑–∞–±–æ—Ä–æ–Ω–∏:**
- ‚ö†Ô∏è –ö–æ–Ω—Ç–µ–Ω—Ç –ø–æ–≤'—è–∑–∞–Ω–∏–π –∑ COVID-19 (–≤–∏–º–∞–≥–∞—î –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ñ–∞–∫—Ç—ñ–≤)
- ‚ö†Ô∏è –ü–æ–ª—ñ—Ç–∏—á–Ω–∞ —Ä–µ–∫–ª–∞–º–∞ (–≤–∏–º–∞–≥–∞—î –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó)
- ‚ö†Ô∏è –°–æ—Ü—ñ–∞–ª—å–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è (–º–æ–∂—É—Ç—å –≤–∏–º–∞–≥–∞—Ç–∏ disclaimers)
- ‚ö†Ô∏è –ü—Ä–æ–¥—É–∫—Ç–∏ –¥–ª—è –¥–æ—Ä–æ—Å–ª–∏—Ö (–Ω–∞–≤—ñ—Ç—å –ª–µ–≥–∞–ª—å–Ω—ñ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ)
- ‚ö†Ô∏è –ö–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–æ –≤–∞–≥—ñ—Ç–Ω—ñ—Å—Ç—å —Ç–∞ –±–∞—Ç—å–∫—ñ–≤—Å—Ç–≤–æ (–æ–±–º–µ–∂–µ–Ω–Ω—è)
- ‚ö†Ô∏è –ü—Å–∏/–∫–æ—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ –ø—Ä–æ–¥–∞–∂—É —Ç–≤–∞—Ä–∏–Ω

**–ö—É–ª—å—Ç—É—Ä–Ω–∞ —á—É—Ç–ª–∏–≤—ñ—Å—Ç—å:**
- ‚ö†Ô∏è –†–µ–ª—ñ–≥—ñ–π–Ω—ñ —Å–∏–º–≤–æ–ª–∏ –∞–±–æ –æ–±—Ä—è–¥–∏
- ‚ö†Ô∏è –ù–∞—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –∞–±–æ –∫—É–ª—å—Ç—É—Ä–Ω—ñ —Å—Ç–µ—Ä–µ–æ—Ç–∏–ø–∏
- ‚ö†Ô∏è –°–≤—è—Ç–∫—É–≤–∞–Ω–Ω—è —â–æ –º–æ–∂—É—Ç—å –æ–±—Ä–∞–∑–∏—Ç–∏

---

**–§–û–†–ú–ê–¢ –í–Ü–î–ü–û–í–Ü–î–Ü (JSON):**
```json
{
  "video_description": {
    "duration_seconds": 0,
    "scene_by_scene": [
      {
        "timestamp": "0:00-0:05",
        "description": "–¥–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å —Å—Ü–µ–Ω–∏",
        "key_elements": ["–µ–ª–µ–º–µ–Ω—Ç1", "–µ–ª–µ–º–µ–Ω—Ç2"]
      }
    ],
    "visual_content": "–ø–æ–≤–Ω–∏–π –æ–ø–∏—Å –≤—ñ–∑—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É",
    "people": {
      "count": 0,
      "descriptions": ["–æ–ø–∏—Å –æ—Å–æ–±–∏ 1", "–æ–ø–∏—Å –æ—Å–æ–±–∏ 2"],
      "age_appropriateness": "–≤—Å—ñ –≤–∏–≥–ª—è–¥–∞—é—Ç—å 18+ / —î —Å—É–º–Ω—ñ–≤–∏ / –Ω–µ–º–æ–∂–ª–∏–≤–æ –≤–∏–∑–Ω–∞—á–∏—Ç–∏",
      "clothing_appropriateness": "–≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º / –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏",
      "actions_and_gestures": ["–¥—ñ—è1", "–¥—ñ—è2"]
    },
    "objects_products": {
      "main_product": "–Ω–∞–∑–≤–∞ –ø—Ä–æ–¥—É–∫—Ç—É",
      "visible_items": ["item1", "item2"],
      "potentially_problematic": ["–ø—Ä–æ–±–ª–µ–º–Ω–∏–π –æ–±'—î–∫—Ç —è–∫—â–æ —î"]
    },
    "on_screen_text": {
      "all_text": ["—Ç–µ–∫—Å—Ç1", "—Ç–µ–∫—Å—Ç2"],
      "claims_made": ["—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è1", "—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è2"],
      "text_to_image_ratio": "–ø—Ä–∏–±–ª–∏–∑–Ω–æ X%"
    },
    "audio_description": {
      "music": "–æ–ø–∏—Å –º—É–∑–∏–∫–∏",
      "music_copyright_risk": "low/medium/high",
      "voiceover": "—â–æ –≥–æ–≤–æ—Ä–∏—Ç—å—Å—è",
      "sound_effects": ["–µ—Ñ–µ–∫—Ç1", "–µ—Ñ–µ–∫—Ç2"],
      "language_appropriateness": "—á–∏—Å—Ç–∞ –º–æ–≤–∞ / —î —Ä–∏–∑–∏–∫–∏"
    },
    "overall_tone": "–¥–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å —Ç–æ–Ω—É —Ç–∞ –Ω–∞—Å—Ç—Ä–æ—é"
  },

  "brands_trademarks": {
    "detected_brands": [
      {
        "brand_name": "–Ω–∞–∑–≤–∞ –±—Ä–µ–Ω–¥—É",
        "type": "logo/text/product",
        "duration_seconds": 2.5,
        "usage_type": "–≤–ª–∞—Å–Ω–∏–π/—Å—Ç–æ—Ä–æ–Ω–Ω—ñ–π/–Ω–µ–≤—ñ–¥–æ–º–æ",
        "potential_issue": true/false
      }
    ],
    "meta_platforms_mentioned": false,
    "competitor_platforms_mentioned": false,
    "celebrity_endorsement": {
      "present": false,
      "details": "–¥–µ—Ç–∞–ª—ñ —è–∫—â–æ –ø—Ä–∏—Å—É—Ç–Ω—ñ"
    },
    "trademark_issues": "–æ–ø–∏—Å –ø—Ä–æ–±–ª–µ–º –∞–±–æ '–Ω–µ–º–∞—î –ø—Ä–æ–±–ª–µ–º'",
    "brand_usage_ok": true/false,
    "copyright_concerns": "–æ–ø–∏—Å –∑–∞–Ω–µ–ø–æ–∫–æ—î–Ω—å"
  },

  "prohibited_content": {
    "adult_content": {
      "nudity": false,
      "sexually_suggestive": false,
      "focus_on_body_parts": false,
      "revealing_clothing": false,
      "sexual_innuendo": false,
      "details": "–¥–µ—Ç–∞–ª—ñ —è–∫—â–æ —â–æ—Å—å –≤–∏—è–≤–ª–µ–Ω–æ"
    },
    "violence_weapons": {
      "weapons_present": false,
      "violence_depicted": false,
      "blood_gore": false,
      "dangerous_activities": false,
      "details": "–¥–µ—Ç–∞–ª—ñ"
    },
    "discriminatory_content": {
      "racial_stereotypes": false,
      "gender_discrimination": false,
      "age_discrimination": false,
      "religious_insensitivity": false,
      "body_shaming": false,
      "details": "–¥–µ—Ç–∞–ª—ñ"
    },
    "substances": {
      "tobacco": false,
      "alcohol": false,
      "drugs": false,
      "paraphernalia": false,
      "details": "–¥–µ—Ç–∞–ª—ñ —Ç–∞ —Ç–∏–ø —è–∫—â–æ –≤–∏—è–≤–ª–µ–Ω–æ"
    },
    "shocking_content": {
      "graphic_imagery": false,
      "disturbing_content": false,
      "fear_inducing": false,
      "details": "–¥–µ—Ç–∞–ª—ñ"
    }
  },

  "health_medical_claims": {
    "before_after_imagery": false,
    "weight_loss_claims": false,
    "disease_treatment_claims": false,
    "unrealistic_results": false,
    "body_focused_negative": false,
    "prescription_drugs": false,
    "medical_devices": false,
    "fda_claims": false,
    "fear_based_health_messaging": false,
    "specific_issues": [
      {
        "type": "—Ç–∏–ø –ø—Ä–æ–±–ª–µ–º–∏",
        "description": "–æ–ø–∏—Å",
        "severity": "low/medium/high/critical"
      }
    ]
  },

  "deceptive_practices": {
    "clickbait": false,
    "misleading_headlines": false,
    "fake_buttons": false,
    "unrealistic_promises": false,
    "fake_scarcity": false,
    "false_testimonials": false,
    "phishing_indicators": false,
    "details": "–¥–µ—Ç–∞–ª—ñ –æ–º–∞–Ω–ª–∏–≤–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫"
  },

  "personal_attributes_targeting": {
    "targets_health_conditions": false,
    "targets_financial_status": false,
    "targets_personal_hardships": false,
    "implies_knowledge_of_user": false,
    "examples": ["–ø—Ä–∏–∫–ª–∞–¥–∏ —è–∫—â–æ —î"]
  },

  "audio_copyright": {
    "copyrighted_music_detected": false,
    "music_recognition": "–Ω–∞–∑–≤–∞ —Ç—Ä–µ–∫—É —è–∫—â–æ –≤–ø—ñ–∑–Ω–∞–Ω–æ / royalty-free / –Ω–µ–≤—ñ–¥–æ–º–æ",
    "copyright_risk_level": "low/medium/high",
    "offensive_language": false,
    "audio_issues": "–¥–µ—Ç–∞–ª—ñ –ø—Ä–æ–±–ª–µ–º"
  },

  "nsfw_check": {
    "safe_for_work": true/false,
    "family_friendly": true/false,
    "age_appropriate_13plus": true/false,
    "specific_concerns": ["concern1", "concern2"],
    "nsfw_reasons": "–¥–µ—Ç–∞–ª—å–Ω—ñ –ø—Ä–∏—á–∏–Ω–∏ —è–∫—â–æ –Ω–µ safe"
  },

  "technical_quality": {
    "resolution_adequate": true/false,
    "text_overlay_percentage": "–ø—Ä–∏–±–ª–∏–∑–Ω–æ X%",
    "flashing_effects": false,
    "viewing_comfort": "–∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ / –º–æ–∂–ª–∏–≤–∏–π –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç",
    "accessibility_concerns": "–ø—Ä–æ–±–ª–µ–º–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ"
  },

  "facebook_policy_violations": [
    {
      "violation_id": 1,
      "category": "—Ç–æ—á–Ω–∞ –Ω–∞–∑–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó Meta Policy",
      "policy_section": "–Ω–∞–∑–≤–∞ —Ä–æ–∑–¥—ñ–ª—É –ø–æ–ª—ñ—Ç–∏–∫–∏",
      "severity": "low/medium/high/critical",
      "description": "–¥–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å –ø–æ—Ä—É—à–µ–Ω–Ω—è",
      "timestamp_seconds": 5.2,
      "specific_frame_description": "—â–æ —Å–∞–º–µ –Ω–∞ —Ü—å–æ–º—É –∫–∞–¥—Ä—ñ",
      "why_its_violation": "—á–æ–º—É —Ü–µ –ø–æ—Ä—É—à–µ–Ω–Ω—è –ø–æ–ª—ñ—Ç–∏–∫–∏",
      "recommendation": "–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –∫—Ä–æ–∫–∏ –¥–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è",
      "alternative_approach": "–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥"
    }
  ],

  "compliance_summary": {
    "will_pass_moderation": true/false,
    "confidence_level": 0.95,
    "risk_level": "low/medium/high/critical",
    "approval_probability": "0-100%",
    "overall_assessment": "–¥–µ—Ç–∞–ª—å–Ω–∞ –∑–∞–≥–∞–ª—å–Ω–∞ –æ—Ü—ñ–Ω–∫–∞ (2-3 —Ä–µ—á–µ–Ω–Ω—è)",
    "critical_blockers": ["–±–ª–æ–∫–µ—Ä1 —è–∫—â–æ —î"],
    "medium_risks": ["—Ä–∏–∑–∏–∫1 —è–∫—â–æ —î"],
    "low_risks": ["—Ä–∏–∑–∏–∫1 —è–∫—â–æ —î"]
  },

  "feedback": {
    "main_issues": [
      {
        "issue": "–ø—Ä–æ–±–ª–µ–º–∞",
        "impact": "–∫—Ä–∏—Ç–∏—á–Ω–∏–π/–≤–∏—Å–æ–∫–∏–π/—Å–µ—Ä–µ–¥–Ω—ñ–π/–Ω–∏–∑—å–∫–∏–π",
        "must_fix": true/false
      }
    ],
    "required_changes": [
      {
        "change": "—â–æ –∑–º—ñ–Ω–∏—Ç–∏",
        "priority": "–∫—Ä–∏—Ç–∏—á–Ω–∏–π/–≤–∏—Å–æ–∫–∏–π/—Å–µ—Ä–µ–¥–Ω—ñ–π",
        "how_to_fix": "—è–∫ —Å–∞–º–µ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏"
      }
    ],
    "recommendations": [
      "–¥–µ—Ç–∞–ª—å–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è 1",
      "–¥–µ—Ç–∞–ª—å–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è 2"
    ],
    "alternative_approaches": [
      "–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ 1 –∑ –ø–æ—è—Å–Ω–µ–Ω–Ω—è–º —á–æ–º—É –≤—ñ–Ω –∫—Ä–∞—â–∏–π",
      "–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ 2"
    ],
    "best_practices": [
      "best practice 1",
      "best practice 2"
    ]
  },

  "action_items": {
    "immediate_blockers": ["—â–æ —Ç—Ä–µ–±–∞ –≤–∏–ø—Ä–∞–≤–∏—Ç–∏ –Ω–µ–≥–∞–π–Ω–æ"],
    "recommended_improvements": ["—â–æ –ø–æ–∫—Ä–∞—â–∏—Ç—å —à–∞–Ω—Å–∏ —Å—Ö–≤–∞–ª–µ–Ω–Ω—è"],
    "optional_enhancements": ["—â–æ –∑—Ä–æ–±–∏—Ç—å —Ä–µ–∫–ª–∞–º—É —â–µ –∫—Ä–∞—â–æ—é"],
    "resubmission_readiness": "–≥–æ—Ç–æ–≤–æ –¥–æ –ø—É–±–ª—ñ–∫–∞—Ü—ñ—ó / –ø–æ—Ç—Ä–µ–±—É—î –∑–º—ñ–Ω / –∫–∞—Ç–µ–≥–æ—Ä–∏—á–Ω–æ –Ω–µ –≥–æ—Ç–æ–≤–æ"
  }
}
```

**–í–ê–ñ–õ–ò–í–û:**
- –ë—É–¥—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–∏–º —ñ —Ç–æ—á–Ω–∏–º
- –Ø–∫—â–æ –Ω–µ –≤–ø–µ–≤–Ω–µ–Ω–∏–π - –≤–∫–∞–∂–∏ —Ü–µ
- –ù–µ –≤–∏–≥–∞–¥—É–π –ø–æ—Ä—É—à–µ–Ω—å —è–∫—â–æ —ó—Ö –Ω–µ–º–∞—î
- –ü–æ—è—Å–Ω–∏ –ß–û–ú–£ —â–æ—Å—å —î –ø–æ—Ä—É—à–µ–Ω–Ω—è–º
- –î–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –ø–æ—Ä–∞–¥–∏ –¥–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
"""


def check_video_policy(
    video_path: str,
    platform: str = "facebook",
    model_name: Optional[str] = None,
    video_url: Optional[str] = None
) -> Dict[str, Any]:
    """
    Check video compliance with platform advertising policy.
    
    Args:
        video_path: Path to video file
        platform: Platform name (currently only 'facebook')
        model_name: Gemini model to use
    
    Returns:
        Dictionary with policy check results
    """
    if platform != "facebook":
        raise ValueError(f"Platform '{platform}' not supported yet. Only 'facebook' is available.")
    
    # Configure Gemini
    api_key = os.environ.get("GOOGLE_API_KEY")
    if not api_key:
        raise RuntimeError("GOOGLE_API_KEY is not set")
    
    genai.configure(api_key=api_key)
    
    # Upload video (from path or URL)
    if video_url:
        # Direct upload from URL (no intermediate storage)
        print(f"üì§ Uploading video from URL for policy check...")
        import httpx
        import io
        
        with httpx.stream("GET", video_url, follow_redirects=True, timeout=60.0) as response:
            response.raise_for_status()
            
            # Create in-memory file
            video_bytes = io.BytesIO()
            for chunk in response.iter_bytes():
                video_bytes.write(chunk)
            video_bytes.seek(0)
            
            # Upload to Gemini from memory
            import tempfile
            with tempfile.NamedTemporaryFile(suffix=".mp4", delete=False) as tmp:
                tmp.write(video_bytes.read())
                tmp_path = tmp.name
            
            try:
                video_file = genai.upload_file(path=tmp_path)
                print(f"‚úÖ Uploaded as: {video_file.name}")
            finally:
                os.unlink(tmp_path)
    else:
        # Upload from local path
        if not os.path.exists(video_path):
            raise FileNotFoundError(f"Video file not found: {video_path}")
        
        print(f"üì§ Uploading video for policy check: {Path(video_path).name}")
        video_file = genai.upload_file(path=video_path)
        print(f"‚úÖ Uploaded as: {video_file.name}")
    
    # Wait for processing
    import time
    print("‚è≥ Waiting for video processing...")
    while video_file.state.name == "PROCESSING":
        time.sleep(2)
        video_file = genai.get_file(video_file.name)
    
    if video_file.state.name != "ACTIVE":
        raise RuntimeError(f"Video processing failed: {video_file.state.name}")
    
    print("‚úÖ Video ready for analysis")
    
    # Get model
    model_to_use = model_name or os.environ.get("GEMINI_MODEL", "models/gemini-2.0-flash")
    if not model_to_use.startswith("models/"):
        model_to_use = f"models/{model_to_use}"
    
    model = genai.GenerativeModel(model_to_use)
    
    # Analyze
    print("üîç Analyzing video for policy compliance...")
    response = model.generate_content(
        [video_file, FACEBOOK_POLICY_PROMPT],
        generation_config={
            "temperature": 0.2,
            "response_mime_type": "application/json"
        }
    )
    
    if response.prompt_feedback and getattr(response.prompt_feedback, "block_reason", None):
        raise RuntimeError(f"Gemini blocked the request: {response.prompt_feedback.block_reason}")
    
    # Parse result
    import json
    result_text = response.text or "{}"
    
    try:
        result = json.loads(result_text)
    except json.JSONDecodeError:
        # Try to extract JSON from response
        import re
        match = re.search(r'\{[\s\S]*\}', result_text)
        if match:
            result = json.loads(match.group(0))
        else:
            raise ValueError("Failed to parse Gemini response as JSON")
    
    print("‚úÖ Policy check complete!")
    
    # Add metadata
    result["metadata"] = {
        "video_path": video_path if video_path else "streamed_from_url",
        "video_url": video_url,
        "platform": platform,
        "model": model_to_use,
        "analyzed_at": time.strftime("%Y-%m-%d %H:%M:%S")
    }
    
    return result


def format_policy_report(result: Dict[str, Any]) -> str:
    """
    Format policy check result as readable text report.
    
    Args:
        result: Policy check result dictionary
    
    Returns:
        Formatted text report
    """
    compliance = result.get("compliance_summary", {})
    will_pass = compliance.get("will_pass_moderation", False)
    risk_level = compliance.get("risk_level", "unknown")
    
    report = "="*80 + "\n"
    report += "üìã FACEBOOK ADS POLICY CHECK REPORT\n"
    report += "="*80 + "\n\n"
    
    # Status
    status_emoji = "‚úÖ" if will_pass else "‚ùå"
    report += f"{status_emoji} MODERATION STATUS: {'PASS' if will_pass else 'FAIL'}\n"
    report += f"‚ö†Ô∏è  RISK LEVEL: {risk_level.upper()}\n"
    report += f"üìä CONFIDENCE: {compliance.get('confidence', 0):.0%}\n\n"
    
    # Main issues
    feedback = result.get("feedback", {})
    main_issues = feedback.get("main_issues", [])
    
    if main_issues:
        report += "üö® MAIN ISSUES:\n"
        for issue in main_issues:
            report += f"   ‚Ä¢ {issue}\n"
        report += "\n"
    
    # Violations
    violations = result.get("facebook_policy_violations", [])
    if violations:
        report += f"‚õî POLICY VIOLATIONS ({len(violations)}):\n\n"
        for i, v in enumerate(violations, 1):
            report += f"   {i}. [{v.get('severity', 'unknown').upper()}] {v.get('category', 'Unknown')}\n"
            report += f"      {v.get('description', 'No description')}\n"
            if v.get('timestamp_seconds'):
                report += f"      Timestamp: {v['timestamp_seconds']}s\n"
            if v.get('recommendation'):
                report += f"      üí° Fix: {v['recommendation']}\n"
            report += "\n"
    
    # NSFW check
    nsfw = result.get("nsfw_check", {})
    if not nsfw.get("safe_for_work", True):
        report += "üîû NSFW WARNING:\n"
        report += f"   {nsfw.get('nsfw_reasons', 'Content not safe for work')}\n\n"
    
    # Required changes
    required_changes = feedback.get("required_changes", [])
    if required_changes:
        report += "‚úèÔ∏è  REQUIRED CHANGES:\n"
        for change in required_changes:
            report += f"   ‚Ä¢ {change}\n"
        report += "\n"
    
    # Recommendations
    recommendations = feedback.get("recommendations", [])
    if recommendations:
        report += "üí° RECOMMENDATIONS:\n"
        for rec in recommendations:
            report += f"   ‚Ä¢ {rec}\n"
        report += "\n"
    
    # Overall assessment
    report += "üìù OVERALL ASSESSMENT:\n"
    report += f"   {compliance.get('overall_assessment', 'No assessment available')}\n\n"
    
    report += "="*80 + "\n"
    
    return report
